pk=["Bulbasaur","Ivysaur","Venusaur","Charmander","Charmeleon","Charizard","Squirtle","Wartortle","Blastoise","Caterpie","Metapod","Butterfree","Weedle","Kakuna","Beedrill","Pidgey","Pidgeotto","Pidgeot","Rattata","Raticate","Spearow","Fearow","Ekans","Arbok","Pikachu","Raichu","Sandshrew","Sandslash","Nidoran♀","Nidorina","Nidoqueen","Nidoran♂","Nidorino","Nidoking","Clefairy","Clefable","Vulpix","Ninetales","Jigglypuff","Wigglytuff","Zubat","Golbat","Oddish","Gloom","Vileplume","Paras","Parasect","Venonat","Venomoth","Diglett","Dugtrio","Meowth","Persian","Psyduck","Golduck","Mankey","Primeape","Growlithe","Arcanine","Poliwag","Poliwhirl","Poliwrath","Abra","Kadabra","Alakazam","Machop","Machoke","Machamp","Bellsprout","Weepinbell","Victreebel","Tentacool","Tentacruel","Geodude","Graveler","Golem","Ponyta","Rapidash","Slowpoke","Slowbro","Magnemite","Magneton","Farfetch'd","Doduo","Dodrio","Seel","Dewgong","Grimer","Muk","Shellder","Cloyster","Gastly","Haunter","Gengar","Onix","Drowzee","Hypno","Krabby","Kingler","Voltorb","Electrode","Exeggcute","Exeggutor","Cubone","Marowak","Hitmonlee","Hitmonchan","Lickitung","Koffing","Weezing","Rhyhorn","Rhydon","Chansey","Tangela","Kangaskhan","Horsea","Seadra","Goldeen","Seaking","Staryu","Starmie","Mr. Mime","Scyther","Jynx","Electabuzz","Magmar","Pinsir","Tauros","Magikarp","Gyarados","Lapras","Ditto","Eevee","Vaporeon","Jolteon","Flareon","Porygon","Omanyte","Omastar","Kabuto","Kabutops","Aerodactyl","Snorlax","Articuno","Zapdos","Moltres","Dratini","Dragonair","Dragonite","Mewtwo","Mew","Chikorita","Bayleef","Meganium","Cyndaquil","Quilava","Typhlosion","Totodile","Croconaw","Feraligatr","Sentret","Furret","Hoothoot","Noctowl","Ledyba","Ledian","Spinarak","Ariados","Crobat","Chinchou","Lanturn","Pichu","Cleffa","Igglybuff","Togepi","Togetic","Natu","Xatu","Mareep","Flaaffy","Ampharos","Bellossom","Marill","Azumarill","Sudowoodo","Politoed","Hoppip","Skiploom","Jumpluff","Aipom","Sunkern","Sunflora","Yanma","Wooper","Quagsire","Espeon","Umbreon","Murkrow","Slowking","Misdreavus","Unown","Wobbuffet","Girafarig","Pineco","Forretress","Dunsparce","Gligar","Steelix","Snubbull","Granbull","Qwilfish","Scizor","Shuckle","Heracross","Sneasel","Teddiursa","Ursaring","Slugma","Magcargo","Swinub","Piloswine","Corsola","Remoraid","Octillery","Delibird","Mantine","Skarmory","Houndour","Houndoom","Kingdra","Phanpy","Donphan","Porygon2","Stantler","Smeargle","Tyrogue","Hitmontop","Smoochum","Elekid","Magby","Miltank","Blissey","Raikou","Entei","Suicune","Larvitar","Pupitar","Tyranitar","Lugia","Ho-Oh","Celebi","Treecko","Grovyle","Sceptile","Torchic","Combusken","Blaziken","Mudkip","Marshtomp","Swampert","Poochyena","Mightyena","Zigzagoon","Linoone","Wurmple","Silcoon","Beautifly","Cascoon","Dustox","Lotad","Lombre","Ludicolo","Seedot","Nuzleaf","Shiftry","Taillow","Swellow","Wingull","Pelipper","Ralts","Kirlia","Gardevoir","Surskit","Masquerain","Shroomish","Breloom","Slakoth","Vigoroth","Slaking","Nincada","Ninjask","Shedinja","Whismur","Loudred","Exploud","Makuhita","Hariyama","Azurill","Nosepass","Skitty","Delcatty","Sableye","Mawile","Aron","Lairon","Aggron","Meditite","Medicham","Electrike","Manectric","Plusle","Minun","Volbeat","Illumise","Roselia","Gulpin","Swalot","Carvanha","Sharpedo","Wailmer","Wailord","Numel","Camerupt","Torkoal","Spoink","Grumpig","Spinda","Trapinch","Vibrava","Flygon","Cacnea","Cacturne","Swablu","Altaria","Zangoose","Seviper","Lunatone","Solrock","Barboach","Whiscash","Corphish","Crawdaunt","Baltoy","Claydol","Lileep","Cradily","Anorith","Armaldo","Feebas","Milotic","Castform","Kecleon","Shuppet","Banette","Duskull","Dusclops","Tropius","Chimecho","Absol","Wynaut","Snorunt","Glalie","Spheal","Sealeo","Walrein","Clamperl","Huntail","Gorebyss","Relicanth","Luvdisc","Bagon","Shelgon","Salamence","Beldum","Metang","Metagross","Regirock","Regice","Registeel","Latias","Latios","Kyogre","Groudon","Rayquaza","Jirachi","Deoxys","Turtwig","Grotle","Torterra","Chimchar","Monferno","Infernape","Piplup","Prinplup","Empoleon","Starly","Staravia","Staraptor","Bidoof","Bibarel","Kricketot","Kricketune","Shinx","Luxio","Luxray","Budew","Roserade","Cranidos","Rampardos","Shieldon","Bastiodon","Burmy","Wormadam","Mothim","Combee","Vespiquen","Pachirisu","Buizel","Floatzel","Cherubi","Cherrim","Shellos","Gastrodon","Ambipom","Drifloon","Drifblim","Buneary","Lopunny","Mismagius","Honchkrow","Glameow","Purugly","Chingling","Stunky","Skuntank","Bronzor","Bronzong","Bonsly","Mime Jr.","Happiny","Chatot","Spiritomb","Gible","Gabite","Garchomp","Munchlax","Riolu","Lucario","Hippopotas","Hippowdon","Skorupi","Drapion","Croagunk","Toxicroak","Carnivine","Finneon","Lumineon","Mantyke","Snover","Abomasnow","Weavile","Magnezone","Lickilicky","Rhyperior","Tangrowth","Electivire","Magmortar","Togekiss","Yanmega","Leafeon","Glaceon","Gliscor","Mamoswine","Porygon-Z","Gallade","Probopass","Dusknoir","Froslass","Rotom","Uxie","Mesprit","Azelf","Dialga","Palkia","Heatran","Regigigas","Giratina","Cresselia","Phione","Manaphy","Darkrai","Shaymin","Arceus","Victini","Snivy","Servine","Serperior","Tepig","Pignite","Emboar","Oshawott","Dewott","Samurott","Patrat","Watchog","Lillipup","Herdier","Stoutland","Purrloin","Liepard","Pansage","Simisage","Pansear","Simisear","Panpour","Simipour","Munna","Musharna","Pidove","Tranquill","Unfezant","Blitzle","Zebstrika","Roggenrola","Boldore","Gigalith","Woobat","Swoobat","Drilbur","Excadrill","Audino","Timburr","Gurdurr","Conkeldurr","Tympole","Palpitoad","Seismitoad","Throh","Sawk","Sewaddle","Swadloon","Leavanny","Venipede","Whirlipede","Scolipede","Cottonee","Whimsicott","Petilil","Lilligant","Basculin","Blue-striped Basculin","Sandile","Krokorok","Krookodile","Darumaka","Darmanitan","Maractus","Dwebble","Crustle","Scraggy","Scrafty","Sigilyph","Yamask","Cofagrigus","Tirtouga","Carracosta","Archen","Archeops","Trubbish","Garbodor","Zorua","Zoroark","Minccino","Cinccino","Gothita","Gothorita","Gothitelle","Solosis","Duosion","Reuniclus","Ducklett","Swanna","Vanillite","Vanillish","Vanilluxe","Deerling","Sawsbuck","Emolga","Karrablast","Escavalier","Foongus","Amoonguss","Frillish","Jellicent","Alomomola","Joltik","Galvantula","Ferroseed","Ferrothorn","Klink","Klang","Klinklang","Tynamo","Eelektrik","Eelektross","Elgyem","Beheeyem","Litwick","Lampent","Chandelure","Axew","Fraxure","Haxorus","Cubchoo","Beartic","Cryogonal","Shelmet","Accelgor","Stunfisk","Mienfoo","Mienshao","Druddigon","Golett","Golurk","Pawniard","Bisharp","Bouffalant","Rufflet","Braviary","Vullaby","Mandibuzz","Heatmor","Durant","Deino","Zweilous","Hydreigon","Larvesta","Volcarona","Cobalion","Terrakion","Virizion","Tornadus","Thundurus","Reshiram","Zekrom","Landorus","Kyurem","Keldeo","Meloetta","Genesect","Chespin","Quilladin","Chesnaught","Fennekin","Braixen","Delphox","Froakie","Frogadier","Greninja","Bunnelby","Diggersby","Fletchling","Fletchinder","Talonflame","Scatterbug","Spewpa","Vivillon","Litleo","Pyroar","Flabébé","Floette","Florges","Skiddo","Gogoat","Pancham","Pangoro","Furfrou","Espurr","Meowstic","Honedge","Doublade","Aegislash","Spritzee","Aromatisse","Swirlix","Slurpuff","Inkay","Malamar","Binacle","Barbaracle","Skrelp","Dragalge","Clauncher","Clawitzer","Helioptile","Heliolisk","Tyrunt","Tyrantrum","Amaura","Aurorus","Sylveon","Hawlucha","Dedenne","Carbink","Goomy","Sliggoo","Goodra","Klefki","Phantump","Trevenant","Pumpkaboo","Gourgeist","Bergmite","Avalugg","Noibat","Noivern","Xerneas","Yveltal","Zygarde","Diancie","Hoopa","Volcanion","Rowlet","Dartrix","Decidueye","Litten","Torracat","Incineroar","Popplio","Brionne","Primarina","Pikipek","Trumbeak","Toucannon","Yungoos","Gumshoos","Grubbin","Charjabug","Vikavolt","Crabrawler","Crabominable","Oricorio","Sensu Oricorio","Pa'u Oricorio","Pom-pom Oricorio","Cutiefly","Ribombee","Rockruff","Lycanroc","Wishiwashi","Mareanie","Toxapex","Mudbray","Mudsdale","Dewpider","Araquanid","Fomantis","Lurantis","Morelull","Shiinotic","Salandit","Salazzle","Stufful","Bewear","Bounsweet","Steenee","Tsareena","Comfey","Oranguru","Passimian","Wimpod","Golisopod","Sandygast","Palossand","Pyukumuku","Type: Null","Silvally","Minior","Komala","Turtonator","Togedemaru","Mimikyu","Bruxish","Drampa","Dhelmise","Jangmo-o","Hakamo-o","Kommo-o","Tapu Koko","Tapu Lele","Tapu Bulu","Tapu Fini","Cosmog","Cosmoem","Solgaleo","Lunala","Nihilego","Buzzwole","Pheromosa","Xurkitree","Celesteela","Kartana","Guzzlord","Necrozma","Magearna","Marshadow","Poipole","Naganadel","Stakataka","Blacephalon","Zeraora","Meltan","Melmetal","Grookey","Thwackey","Rillaboom","Scorbunny","Raboot","Cinderace","Sobble","Drizzile","Inteleon","Skwovet","Greedent","Rookidee","Corvisquire","Corviknight","Blipbug","Dottler","Orbeetle","Nickit","Thievul","Gossifleur","Eldegoss","Wooloo","Dubwool","Chewtle","Drednaw","Yamper","Boltund","Rolycoly","Carkol","Coalossal","Applin","Flapple","Appletun","Silicobra","Sandaconda","Cramorant","Arrokuda","Barraskewda","Toxel","Toxtricity","Sizzlipede","Centiskorch","Clobbopus","Grapploct","Sinistea","Polteageist","Hatenna","Hattrem","Hatterene","Impidimp","Morgrem","Grimmsnarl","Obstagoon","Perrserker","Cursola","Sirfetch'd","Mr. Rime","Runerigus","Milcery","Alcremie","Falinks","Pincurchin","Snom","Frosmoth","Stonjourner","Eiscue","Indeedee","Morpeko","Cufant","Copperajah","Dracozolt","Arctozolt","Dracovish","Arctovish","Duraludon","Dreepy","Drakloak","Dragapult","Zacian","Zamazenta","Eternatus","Kubfu","Urshifu","Zarude","Regieleki","Regidrago","Glastrier","Spectrier","Calyrex","Wyrdeer","Kleavor","Ursaluna","Basculegion","Sneasler","Overqwil","Enamorus","Sprigatito","Floragato","Meowscarada","Fuecoco","Crocalor","Skeledirge","Quaxly","Quaxwell","Quaquaval","Lechonk","Oinkologne","Tarountula","Spidops","Nymble","Lokix","Pawmi","Pawmo","Pawmot","Tandemaus","Maushold","Fidough","Dachsbun","Smoliv","Dolliv","Arboliva","Squawkabilly","Nacli","Naclstack","Garganacl","Charcadet","Armarouge","Ceruledge","Tadbulb","Bellibolt","Wattrel","Kilowattrel","Maschiff","Mabosstiff","Shroodle","Grafaiai","Bramblin","Brambleghast","Toedscool","Toedscruel","Klawf","Capsakid","Scovillain","Rellor","Rabsca","Flittle","Espathra","Tinkatink","Tinkatuff","Tinkaton","Wiglett","Wugtrio","Bombirdier","Finizen","Palafin","Varoom","Revavroom","Cyclizar","Orthworm","Glimmet","Glimmora","Greavard","Houndstone","Flamigo","Cetoddle","Cetitan","Veluza","Dondozo","Tatsugiri","Annihilape","Clodsire","Farigiraf","Dudunsparce","Kingambit","Great Tusk","Scream Tail","Brute Bonnet","Flutter Mane","Slither Wing","Sandy Shocks","Iron Treads","Iron Bundle","Iron Hands","Iron Jugulis","Iron Moth","Iron Thorns","Frigibax","Arctibax","Baxcalibur","Gimmighoul","Gholdengo","Wo-Chien","Chien-Pao","Ting-Lu","Chi-Yu","Roaring Moon","Iron Valiant","Koraidon","Miraidon","Walking Wake","Iron Leaves","Dipplin","Poltchageist","Sinistcha","Okidogi","Munkidori","Fezandipiti","Ogerpon","Archaludon","Hydrapple","Gouging Fire","Raging Bolt","Iron Boulder","Iron Crown","Terapagos","Pecharunt"] #1025
morse={'A':"•-",'B':"-•••",'C':"-•-•",'D':"-••",'E':"•",'F':"••-•",'G':"--•",'H':"••••",'I':"••",'J':"•---",'K':"-•-",'L':"•-••",'M':"--",'N':"-•",'O':"---",'P':"•--•",'Q':"--•-",'R':"•-•",'S':"•••",'T':"-",'U':"••-",'V':"•••-",'W':"•--",'X':"-••-",'Y':"-•--",'Z':"--••",'1':"•----",'2':"••---",'3':"•••--",'4':"••••-",'5':"•••••",'6':"-••••",'7':"--•••",'8':"---••",'9':"----•",'0':"-----",'?':"••--••",'!':"-•-•--",'.':"•-•-•-",',':"--••--",';':"-•-•-•",':':"---•••",'+':"•-•-•",'-':"-••••-",'/':"-••-•",'=':"-•••-"}
import random
import yt_dlp
import logging
import asyncio
import discord
from collections import deque
from discord.ext import commands
from discord.ui import Button, View, Modal, TextInput

# Create a file handler that appends logs
file_handler = logging.FileHandler("bot_logs.txt", mode="a", encoding="utf-8")
file_handler.setLevel(logging.INFO)
formatter = logging.Formatter("%(asctime)s [%(levelname)s] %(name)s: %(message)s")
file_handler.setFormatter(formatter)
voice_logger = logging.getLogger("discord.voice_state")
voice_logger.setLevel(logging.INFO)
voice_logger.addHandler(file_handler)

#Intents
intents = discord.Intents.all()
intents.message_content = True
intents.voice_states = True
bot = commands.Bot(command_prefix=';',intents=intents)

# ---------- VOICE HELPERS ----------
queues = {}
def get_queue(guild_id):
    if guild_id not in queues:
        queues[guild_id] = deque()
    return queues[guild_id]

async def fetch_info(query):
    ydl_opts = {"format": "bestaudio", "noplaylist": True, "quiet": True}
    loop = asyncio.get_running_loop()
    return await loop.run_in_executor(None, lambda: yt_dlp.YoutubeDL(ydl_opts).extract_info(query, download=False))

async def play_next(ctx, guild_id):
    queue = get_queue(guild_id)
    if not queue:
        await ctx.voice_client.disconnect()
        return
    song = queue[0]  # next song
    ffmpeg_opts = {
        "before_options": "-reconnect 1 -reconnect_streamed 1 -reconnect_delay_max 5",
        "options": "-vn"
    }
    source = discord.FFmpegPCMAudio(song["url"], **ffmpeg_opts)
    def after_play(error):
        if error:
            print(f"Ignored FFmpeg error: {error}")
        bot.loop.create_task(next_song(ctx, guild_id))
    ctx.voice_client.play(source, after=after_play)

async def next_song(ctx, guild_id):
    queue = get_queue(guild_id)
    if queue:
        queue.popleft()  # remove current song
        if queue:
            await play_next(ctx, guild_id)

#COMMANDS
#Social
@bot.command(aliases=["avatar"])
async def av(ctx,*,mem:discord.Member=None):
	if not mem:
		mem=ctx.message.author
	pic,pic2=mem.display_avatar,ctx.message.author.display_avatar
	for i in range(0,10):
		col=discord.Color.from_rgb(random.randint(0,255),random.randint(0,255),random.randint(0,255))
		e1=discord.Embed(description="**Avatar**",color=col)
		e1.set_author(name=mem.display_name,icon_url=pic)
		e1.set_image(url=pic)
		e1.set_footer(text="Requested by "+str(ctx.author.name),icon_url=pic2)
		if i==0:
			m=await ctx.send(embed=e1)
		elif "gif" not in str(pic):
			await m.edit(embed=e1)
@bot.command(help="Hug")
async def hug(ctx,*,member:discord.Member=None):
		j=str(member)
		if not member:
			await ctx.reply("Ping someone")
		else:
			k=discord.Color.from_rgb(random.randint(0,255),random.randint(0,255),random.randint(0,255))
			t=str(j[0:(len(j)-5)])
			e=discord.Embed(title=str(ctx.author.name)+" hugs "+t,color=k)
			if ctx.author.name==t:
				e=discord.Embed(title="Rin-chan hugs "+t,color=k)
			v=random.randint(0,7)
			hug=["https://media.discordapp.net/attachments/862171192261345280/869928566450696192/tenor.gif","https://i.imgur.com/f8C9M7n.gif","https://i.pinimg.com/originals/85/72/a1/8572a1d1ebaa45fae290e6760b59caac.gif","https://cdn.weeb.sh/images/SknauOQwb.gif","https://cdn.weeb.sh/images/rkx1dJ25z.gif","https://66.media.tumblr.com/607bc7d527ba0dff8e16f27f839da02d/tumblr_msii46Qegu1sgjyb4o1_400.gif","https://i.pinimg.com/originals/48/83/3e/48833e7a66a2453212ddb2933e099b18.gif","https://cdn.weeb.sh/images/ryuhhuJdb.gif"]
			e.set_image(url=hug[v])
			await ctx.send(embed=e)
@bot.command(help="Kiss")
async def kiss(ctx,*,member:discord.Member=None):
		j=str(member)
		if not member:
			await ctx.reply("Ping someone")
		else:
			k=discord.Color.from_rgb(random.randint(0,255),random.randint(0,255),random.randint(0,255))
			t=str(j[0:(len(j)-5)])
			e=discord.Embed(title=str(ctx.author.name)+" kissed "+t,color=k)
			if ctx.author.name==t:
				e=discord.Embed(title="Rin-chan kissed "+t,color=k)
			v=random.randint(0,4)
			hug=["https://cdn.myanimelist.net/s/common/uploaded_files/1483588705-b321623c459d2a7001761459d2c8707a.gif","https://cdn.myanimelist.net/s/common/uploaded_files/1483589017-3fbb8453e1ba6b5e7b63264199d177f5.gif","https://cdn69.picsart.com/191947441000202.gif?to=min&r=640","https://data.whicdn.com/images/200294594/original.gif","https://c.tenor.com/9IHLn02sU7MAAAAC/anime-beijo.gif"]
			e.set_image(url=hug[v])
			await ctx.send(embed=e)
@bot.command(help="Poll")
async def poll(ctx,ques,ch1,ch2,ch3=None,ch4=None,ch5=None,ch6=None,ch7=None,ch8=None,ch9=None,ch10=None):
	mess,n="",2
	if ch3:
		mess,n="".join([mess,"\n:three: "+ch3]),3
	if ch4:
		mess,n="".join([mess,"\n:four: "+ch4]),4
	if ch5:
		mess,n="".join([mess,"\n:five: "+ch5]),5
	if ch6:
		mess,n="".join([mess,"\n:six: "+ch6]),6
	if ch7:
		mess,n="".join([mess,"\n:seven: "+ch7]),7
	if ch8:
		mess,n="".join([mess,"\n:eight: "+ch8]),8
	if ch9:
		mess,n="".join([mess,"\n:nine: "+ch9]),9
	if ch10:
		mess,n="".join([mess,"\n:keycap_ten: "+ch10]),10
	e=discord.Embed(title=ques,description=":one: "+ch1+"\n:two: "+ch2+mess,color=discord.Color.from_rgb(134,243,71))
	e.set_footer(text="Requested by "+ctx.author.name,icon_url=ctx.message.author.display_avatar)
	m=await ctx.send(embed=e)
	emojis = ["1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","🔟"]
	for i in range(0,n):
		await m.add_reaction(emojis[i])
@bot.command(help="Bot speaks")
async def say(ctx,*,sub):
	await ctx.message.delete()
	await ctx.send(sub)

#Miscellanous
@bot.command(aliases=["ggl"])
async def google(ctx,*,sub):
	link="https://www.google.com/search?q="
	wrds=sub.split()
	for i in wrds:
		link="".join([link,i,"+"])
	link=str(link[0:(len(link)-1)])
	await ctx.send(link)
@bot.command(help="Invite")
async def invite(ctx):
	e=discord.Embed(title="**Invite Link**",description="<insert_invite_link>",color=discord.Color.from_rgb(255, 211, 0))
	await ctx.send(embed=e)
@bot.command(help="Ping")
async def ping(ctx):
	i=bot.latency
	s = "Good" if i < 0.3 else "Normal" if i < 0.6 else "Bad"
	await ctx.send(":ping_pong: Speed "+str(round(i*1000))+"ms | :satellite: "+s)
@bot.command(pass_context=True,help="Purge")
@commands.has_permissions(administrator=True)
async def purge(ctx,amt=0,mem:discord.Member=None):
	if not mem:
		await ctx.channel.purge(limit=amt+1)
		await ctx.send(str(amt)+" messages were deleted",delete_after=0.4)
	else:
		msg=[]
		if mem==ctx.author:
			C=-1
		else:
			C=0
		await ctx.channel.purge(limit=1)
		async for m in ctx.channel.history(limit=1000):
			if m.author==mem:
				C+=1
				msg.append(m)
			if C==amt:
				break
		await ctx.channel.delete_messages(msg)
		await ctx.send(f'Deleted {amt} messages from {mem}.',delete_after=0.4)
@bot.command(help="RPS")
async def rps(ctx,*,msg):
	msg=msg.lower()
	bc=random.randint(0,2) #Bot Choice
	choices=["**Rock**","**Paper**","**Scissors**"]
	if msg in ["r","rock"]:
		pc=0 #Player Choice
	elif msg in ["p","paper"]:
		pc=1
	elif msg in ["s","scissor","scissors"]:
		pc=2
	else:
		await ctx.reply("That is not a valid option")
	if pc>=0 and pc<3:
		if pc==bc:
			col=discord.Color.blue()
			s="tied with the bot :sweat_smile:"
		elif (pc-bc==1 or (bc==2 and pc==0)):
			col=discord.Color.teal()
			s="won!!! :sunglasses:"
		else:
			col=discord.Color.red()
			s="lost :cry:"
		bc,pc=choices[bc],choices[pc]
		embed=discord.Embed(title="Results!!!",description=str(ctx.message.author.name)+" chose "+str(pc)+"\nRin chose "+str(bc)+"\nPlayer "+s,color=col)
		await ctx.send(embed=embed)

#Music
@bot.command()
async def join(ctx):
    if ctx.author.voice:
        await ctx.author.voice.channel.connect()
        logging.info(f"Joined voice channel {ctx.author.voice.channel} in guild {ctx.guild.name}")
    else:
        await ctx.send("You must be in a voice channel first.")
        logging.info(f"{ctx.author} tried to join but was not in a voice channel")

@bot.command()
async def leave(ctx):
    if ctx.voice_client:
        await ctx.voice_client.disconnect()
    else:
        await ctx.send("I'm not in a voice channel.")

@bot.command()
async def play(ctx, *, query: str):
    vc = ctx.voice_client
    if not vc:
        await ctx.invoke(join)
        vc = ctx.voice_client

    ydl_opts = {
        "format": "bestaudio",
        "noplaylist": True,
        "default_search": "ytsearch1",
        "quiet": True
    }
    with yt_dlp.YoutubeDL(ydl_opts) as ydl:
        info = ydl.extract_info(query, download=False)
        if "entries" in info:
            info = info["entries"][0]
        audio_url = info["url"]

    guild_id = ctx.guild.id
    queue = get_queue(guild_id)
    queue.append({"title": info["title"], "url": audio_url})

    if not vc.is_playing() and not vc.is_paused():
        await play_next(ctx, guild_id)

    class MusicButtons(View):
        def __init__(self):
            super().__init__(timeout=None)

        @discord.ui.button(label="⏯ Pause/Resume", style=discord.ButtonStyle.primary)
        async def pause_resume(self, interaction: discord.Interaction, button: Button):
            if vc.is_playing():
                vc.pause()
                await interaction.response.send_message("⏸ Paused")
            elif vc.is_paused():
                vc.resume()
                await interaction.response.send_message("▶ Resumed")

        @discord.ui.button(label="⏭ Skip", style=discord.ButtonStyle.secondary)
        async def skip(self, interaction: discord.Interaction, button: discord.ui.Button):
            vc = interaction.guild.voice_client
            if not vc:
                await interaction.response.send_message("I'm not in a voice channel.", ephemeral=True)
                return
            if vc.is_paused():
                vc.resume()
            vc.stop()
            await interaction.response.send_message("⏭ Skipped")

        @discord.ui.button(label="🗑 Stop & Clear", style=discord.ButtonStyle.danger)
        async def stop_all(self, interaction: discord.Interaction, button: discord.ui.Button):
            guild_id = interaction.guild.id
            queue = get_queue(guild_id)
            queue.clear()
            vc = interaction.guild.voice_client
            if vc:
                vc.stop()  # safe stop
            await interaction.response.send_message("🗑 Stopped and cleared queue")

        @discord.ui.button(label="Queue", style=discord.ButtonStyle.secondary)
        async def show_queue(self, interaction: discord.Interaction, button: Button):
            if not queue:
                await interaction.response.send_message("Queue is empty.", ephemeral=True)
            else:
                msg = "\n".join([f"{i+1}. {s['title']}" for i, s in enumerate(queue)])
                await interaction.response.send_message(f"Queue:\n{msg}", ephemeral=True)

        @discord.ui.button(label="Remove Song", style=discord.ButtonStyle.secondary)
        async def remove_song(self, interaction: discord.Interaction, button: Button):
            class RemoveModal(Modal):
                def __init__(self):
                    super().__init__("Remove Song from Queue")
                    self.song_number = TextInput(label="Song Number to Remove", placeholder="Enter a number", required=True)
                    self.add_item(self.song_number)
                async def callback(self, modal_interaction: discord.Interaction):
                    try:
                        num = int(self.song_number.value)
                        if 1 <= num <= len(queue):
                            removed = queue[num-1]["title"]
                            del queue[num-1]
                            await modal_interaction.response.send_message(f"Removed **{removed}** from the queue", ephemeral=True)
                        else:
                            await modal_interaction.response.send_message("Invalid song number", ephemeral=True)
                    except ValueError:
                        await modal_interaction.response.send_message("Please enter a valid number", ephemeral=True)
            await interaction.response.send_modal(RemoveModal())
    await ctx.send(f"Added to queue: **{info['title']}**", view=MusicButtons())

#Pokemon
@bot.command(help="Gigantamax Pokemon")
async def giga(ctx,*,sub=None):
	if not sub or sub=="1":
		p1="Alcremie\nAppletun\nBlastoise\nButterfree\nCentiskorch\nCharizard\nCinderace\nCoalossal\nCopperajah\nCorviknight\nDrednaw\nDuraludon\nEevee\nFlapple\nGarbodor\nGengar"
		e=discord.Embed (title="**Gigantamax Pokemon P1**",description=p1,color=discord.Color.red())
		e.set_footer(text="See the second page using ;giga 2")
		await ctx.send(embed=e)
	elif sub=="2":
		p2="Grimmsnarl\nHatterene\nInteleon\nKingler\nLapras\nMachamp\nMelmetal\nMeowth\nOrbeetle\nPikachu\nRillaboom\nSandaconda\nSnorlax\nToxtricity\nUrshifu\nVenusaur"
		e=discord.Embed (title="**Gigantamax Pokemon P2**",description=p2,color=discord.Color.red())
		e.set_footer(text="See the first page using ;giga")
		await ctx.send(embed=e)
	else:
		await ctx.reply("'giga' has only 2 pages")
@bot.command(help="Mega Pokemon")
async def mega(ctx,*,sub=None):
	if not sub or sub=="1":
		p1="Abomasnow\nAbsol\nAerodactyl\nAggron (-Rock)\nAlakazam\nAltaria (Flying --> Fairy)\nAmpharos (+Dragon)\nAudino (+Fairy)\nBanette\nBeedrill\nBlastoise\nBlaziken\nCamerupt\nCharizard X (Flying --> Dragon)\nCharizard Y\nDiancie\nGallade\nGarchomp\nGardevoir\nGengar\nGlalie\nGyarados\nHeracross\nHoundoom"
		e=discord.Embed (title="**Mega-Evolved Pokemon P1**",description=p1,color=discord.Color.red())
		e.set_footer(text="See the second page using ;mega 2")
		await ctx.send(embed=e)
	elif sub=="2":
		p2="Kangaskhan\nLatias\nLatios\nLopunny (+Flying)\nLucario\nManectric\nMawile\nMedicham\nMetagross\nMewtwo X (+Fighting)\nMewtwo Y\nPidgeot\nPinsir (+Flying)\nRayquaza (Flying --> Dark)\nSableye\nSalamence\nSceptile (+Dragon)\nScizor\nSharpedo\nSlowbro\nSteelix\nSwampert\nTyranitar\nVenusaur"
		e=discord.Embed (title="**Mega-Evolved Pokemon P2**",description=p2,color=discord.Color.red())
		e.set_footer(text="See the first page using ;mega")
		await ctx.send(embed=e)
	else:
		await ctx.reply("'mega' has only 2 pages")
@bot.command(help="Poketwo Info")
async def pinfo(ctx):
	e=discord.Embed(title="**Poke-Info**",description="*#This bot acts as a companion to Pokétwo#8236 and answers to* **\"The pokémon is <name>.**\" with a pokemon name.\n*#This bot guesses the pokemon according to the hint supplied (use the hint command of Pokétwo#8236), which may result in multiple guesses*.\n*#This bot does not consider regions and events.*\n**Example:-**\nAlolan Raichu --> Raichu\nAnniversary Wooloo --> Wooloo\n*#This bot also provides a list of all mega and gigantamax pokemon*",color=discord.Color.from_rgb(255,105,180))
	e.set_author(name=ctx.author.name,icon_url=ctx.author.display_avatar)
	await ctx.send(embed=e)

#No Category
bot.remove_command('help')
@bot.command(help="Impersonate")
async def imp(ctx,sub,*,mem:discord.Member=None):
	if not mem:
		mem=ctx.author
	web=await ctx.channel.create_webhook(name=ctx.author.name)
	await ctx.message.delete()
	await web.send(sub,username=mem.display_name, avatar_url=mem.display_avatar)
	await web.delete()
@bot.command(help="Morse Code")
async def mc(ctx,*,c):
	c,res=c.upper(),""
	for i in c:
		if i!=" ":
			res="".join([res,str(morse[i])," "])
		else:
			res="".join([res,"\n"])
	await ctx.send(res)
@bot.command(help="Morse Decode")
async def md(ctx,*,sub):
	sub2,dm="",""
	for i in sub:
		if i==".":
			i="•"
		if i=="_":
			i="-"
		sub2="".join([sub2,i])
	wl=sub2.split("\n")
	for word in wl:
		cl=word.split()
		for c in cl:
			for x,y in morse.items():
				if y==c:
					dm+=x
		dm+="\n"
	embed=discord.Embed(title="Decoded Message",description=dm,color=discord.Color.blue())
	await ctx.send(embed=embed)
@bot.command(help="Help")
async def help(ctx,*,sub=None):
	if not sub:
		e=discord.Embed(title="**Help Commands**",description="**Social**\navatar   hug   kiss   poll   say\n**Miscellanous**\ngoogle   invite   ping   purge   rps\n**Pokemon**\ngiga   mega   pinfo\n**Songs**\njoin   leave   play\n**No Category**\nhelp   imp   mc   md",color=discord.Color.from_rgb(255,105,180))
		e.set_footer(text="Created By <insert_owner_id>")
	elif sub=="avatar" or sub=="av":
		e=discord.Embed(title="Avatar",description="View everybody's avatar\n**Aliases:**\nav\n**Usage:**\n;av                         Your Avatar\n;av [member]    Other's avatar\n*Non-gif profiles get a special showcase of their avatar.*",color=discord.Color.from_rgb(255,105,180))
	elif sub=="giga":
		e=discord.Embed(title="Giga",description="This command gives a list of all pokemon in alphabetic manner.\n`;giga` gives the names of pokemon starting with Alphabets A to G.\nThe rest can be seen using `;giga 2`",color=discord.Color.from_rgb(255,105,180))
	elif sub=="google" or sub=="ggl":
		e=discord.Embed(title="Google",description="Get a google link to what you want\n**Aliases:**\nggl\n**Usage**\n;ggl How to use discord",color=discord.Color.from_rgb(255,105,180))
	elif sub=="help":
		e=discord.Embed(title="Help",description="Brings up the help command with list of all other commands\n**Usage:**\n;help",color=discord.Color.from_rgb(255,105,180))
	elif sub=="hug":
		e=discord.Embed(title="Hug",description="Hug Others\n**Usage:**\n;hug [member]",color=discord.Color.from_rgb(255,105,180))
	elif sub=="imp":
		e=discord.Embed(title="Impersonate",description="Impersonate as others\n**Usage:**\n;imp <message> [member]\nNote that message has to be written in ""  and also that member's name and id both can be used\n**Example:**\n;imp \"Hello\" MightyAnik#0470\n;imp \"Hello\" 752233106836160652",color=discord.Color.from_rgb(255,105,180))
	elif sub=="invite":
		e=discord.Embed(title="Invite Link",description="Get an invite link for the bot",color=discord.Color.from_rgb(255,105,180))
	elif sub=="kiss":
		e=discord.Embed(title="Kiss",description="Kiss Others\n**Usage:**\n;kiss [member]",color=discord.Color.from_rgb(255,105,180))
	elif sub=="mc":
		e=discord.Embed(title="Morse Code",description="Morse Code A Sentence\n**Usage:**\n;mc <sentence>",color=discord.Color.from_rgb(255,105,180))
	elif sub=="md":
		e=discord.Embed(title="Morse Decode",description="Morse Decode A Coded Sentence\n**Usage:**\n;md <sentence>",color=discord.Color.from_rgb(255,105,180))
	elif sub=="mega":
		e=discord.Embed(title="Mega",description="This command gives a list of all pokemon in alphabetic manner.\n`;mega` gives the names of pokemon starting with Alphabets A to H.\nThe rest can be seen using `;mega 2`",color=discord.Color.from_rgb(255,105,180))
	elif sub=="pinfo":
		e=discord.Embed(title="Pinfo",description="Info on pokemon guessing (Pokétwo#8236)",color=discord.Color.from_rgb(255,105,180))
	elif sub=="ping":
		e=discord.Embed(title="Ping",description="Check Bot Speed",color=discord.Color.from_rgb(255,105,180))
	elif sub=="poll":
		e=discord.Embed(title="Poll",description="Create A Poll with 2-10 choices\n**Usage:**\n;poll [question] [choice1] [choice2] ...\n**Example:**\n;poll \"What are you doing?\" Trekking Studying Playing Chatting \"Chilling with friends\"",color=discord.Color.from_rgb(255,105,180))
	elif sub=="purge":
		e=discord.Embed(title="Purge",description="Delete Messages\n**Example:-**\n\";purge 10\" will delete 10 messages\n\";purge 10 <member>\" will delete last 10 messges of that member",color=discord.Color.from_rgb(255,105,180))
	elif sub=="rps":
		e=discord.Embed(title="Rock Paper Scissors",description="Play A Match of Rock Paper Scissors with the bot\n**Usage**\n;rps r\n;rps Paper\n**List of Choices**\nr/rock\np/paper\ns/scissor",color=discord.Color.from_rgb(255,105,180))
	elif sub=="say":
		e=discord.Embed(title="Say",description="Make the Bot speak your words\n**Usage:**\n;say <sentence>\n**Example:**\n`;say Hello`\n**Note:**\nDon't use quotes!!!",color=discord.Color.from_rgb(255,105,180))
	await ctx.send(embed=e)

#Event
@bot.event
async def on_command_error(ctx,error):
	if isinstance(error,commands.CommandNotFound):
		await ctx.send(error)
	else:
		print(error)
@bot.event
async def on_ready():
	act=discord.Game(name="Pokémon GO")
	await bot.change_presence(activity=act,status=discord.Status.online)
@bot.event
async def on_voice_state_update(member, before, after):
    if before.channel is not None:
        vc = before.channel.guild.voice_client
        if vc and len(before.channel.members) == 1:  # only bot left
            await vc.disconnect()
@bot.event
async def on_message(m):
	msg=m.content
	flag=0
	if msg=="<@833782878852743209>": #Bot Ping
		await m.reply("My prefix is ;\nUse `;help` for command list")
	if str(m.author)=="OwO#8456": #Pray/Curse
		if "prays" in msg:
			await m.channel.send("https://i.pinimg.com/originals/6a/95/9b/6a959b2e70ca489173fb45354513fa47.gif")
		if "curse" in msg:
			await m.channel.send("https://pa1.narvii.com/6149/c168b70bef03352787323fe4cb3b655fe57d31ae_hq.gif")
	if "The pokémon is" in msg:
		pks=str(msg[(msg.rindex(" ")+1):(len(msg)-1)])
		name,name2="",""
		for i in pks:
			if i!="\\":
				name=name+i
		for loop in pk:
			if len(loop)==len(name):
				name,i=name.lower(),loop.lower()
				for j in range(0,len(i)):
					if name[j]!="_":
						if i[j]==name[j]:
							flag=1
						else:
							flag=0
							break
				if flag==1:
					pe=discord.Embed(title="My Guess",description=loop,color=discord.Color.from_rgb(255,105,180))
					await m.channel.send(embed=pe)
		pks2=str(msg[0:msg.rindex(" ")])
		pks3=str(pks2[(pks2.rindex(" ")+1):len(pks2)])
		for i in pks3:
			if i!="\\":
				name2=name2+i
		name2=name2+" "+name
		for loop in pk:
			if len(loop)==len(name2):
				name2,i=name2.lower(),loop.lower()
				for j in range(0,len(i)-1):
					if name2[j]!="_":
						if i[j]==name2[j]:
							flag=1
						else:
							flag=0
							break
				if flag==1:
					desc="@Pokétwo#8236 c",loop
					print(desc)
					pe=discord.Embed(title="My Guess",description=desc,color=discord.Color.from_rgb(255,105,180))
					await m.channel.send(embed=pe)
	await bot.process_commands(m)
bot.run(<insert_discord_token>)
